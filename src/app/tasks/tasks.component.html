<div class="container">
    <button class="btn btn-primary float-end my-3" data-bs-toggle="modal" *ngIf="adminOps"
      data-bs-target="#exampleModal">Add Task</button>
    <table class="table table-striped table-responsive" *ngIf="!noTasks">
      <th *ngIf="adminOps">ID</th>
  
      <th>Title</th>
  
      <th *ngIf="adminOps">Assigned To</th>
  
      <th>Assigned Date</th>
  
      <th>Due Date</th>
  
      <th>Days Left</th>
  
      <th>Status</th>
  
      <th>Actions</th>
  
  
      <tbody>
        <tr *ngFor="let x of taskData">
          <td *ngIf="adminOps">{{x.id}}</td>
          <td>{{x.title|titlecase}}</td>
          <td *ngIf="adminOps">{{x.userName}}</td>
          <td>{{x.assignedDate|date}}</td>
          <td>{{x.dueDate|date}}</td>
          <td>{{getDaysLeft(x.assignedDate,x.dueDate)}}</td>
          <td>{{x.status|titlecase}}</td>
  
          <td>
            <button class="btn btn-outline-info ms-2" *ngIf="adminOps">Edit</button>
            <button (click)="deleteTask(x.id)" class="btn btn-outline-danger ms-2" *ngIf="adminOps">Delete</button>
            <button (click)="updateStatus(x)" data-bs-toggle="modal" data-bs-target="#myModal" *ngIf="!adminOps">Update Status</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- Modal for editing whole task -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Add Task</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form #taskForm="ngForm" (ngSubmit)="taskForm.form.valid && onSubmit()" action="#">
            <div class="form-Group mb-3">
              <label for="title" class="col-3">Title:</label>
              <input id="title" class="col-8" name="title" #title [(ngModel)]="taskDetails.title" required type="text">
            </div>
  
            <div class="form-Group mb-3">
              <label class="col-3">Assigned To:</label>
              <select (change)="setUserId()" name="assignedTo" [(ngModel)]="taskDetails.userName" required>
                <option *ngFor="let user of userNames" value="{{user}}">{{user}}</option>
  
              </select>
  
            </div>
  
            <div class="form-Group mb-3">
              <label class="col-3">Assigned Date</label>
              <input #assignedDate name="assignedDate" [(ngModel)]="taskDetails.assignedDate" type="date">
            </div>
  
  
            <div class="form-Group mb-3">
              Due Date:<input #dueDate type="date" name="dueDate" [(ngModel)]="taskDetails.dueDate">
            </div>
  
            <button type="submit" (click)="assignedDate.value='';dueDate.value='';title.value=''" class="btn btn-primary" data-bs-dismiss="modal">Post Task</button>
          </form>
        </div>
  
      </div>
    </div>
  </div>
  
  <!-- modal for updating status -->
  <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="myModalLabel">Status Update</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <select [(ngModel)]="currentStatus" required>
            <option >{{currentStatus}}</option>
            <option value="Pending">Pending</option>
            <option value="Done">Accomplished</option>
          </select>
          <button (click)="putTaskStatus()">Set Status</button>
        </div>
      </div>
    </div>
  </div>
  
  <div class="" *ngIf="noTasks">
    <h1 class="mt-5 text-black text-center">No Tasks!!!</h1> 
  </div>